<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">
    <ui:define name="head">
        <script type="text/javascript">
            function indice() {
                var textarea = document.getElementById("formEj:formula");
                var input = document.getElementById("formEj:indice");
                var cursorPosition = textarea.selectionStart;
                input.value = cursorPosition;
            }


            function start() {
                PF('statusDialog').show();
            }

            function stop() {
                PF('statusDialog').hide();
            }

        </script>
    </ui:define>
    <ui:define name="breadCrumb" class="Container90">
        <p:breadCrumb>
            <p:menuitem value="Home" url="/"/>
            <p:menuitem value="Gestionar Año Escolar" url="#"/>
            <p:menuitem value="Gestionar Clases" url="#"/>
            <p:menuitem value="Ejercicios" url="#"/>
            <p:menuitem value="Diseño de Ejercicio" url="#{siteUrls.ejerciciosResueltos}"/>
            <p:separator />
        </p:breadCrumb>
        <i class="icon-question Fs25 Red Container2 ui-breadcrumb" style="cursor: pointer;" onclick="PF('dlgAyuda').show();"></i>
    </ui:define>
    <ui:define name="content">
        <p:panel id="tabEj">
            <h:form id="formEj">
                <p:dialog widgetVar="dlgAyuda" modal="true" appendTo="@(body)" header="Ayuda" width="400" maximizable="true">
                    <ui:include src="ayuda/index.xhtml"></ui:include>
                </p:dialog>
                <p:menubar>
                    <p:submenu label="Funciones" >   
                        <p:submenu label="Trigonometricas">
                            <p:menuitem value="sen(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(9)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="cos(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(10)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="tan(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(11)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="cot(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(12)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="senh(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(13)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="cosh(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(14)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="tanh(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(15)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="coth(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(16)}" update="formula,myScript" onclick="indice();"/>
                            <p:separator />
                            <p:menuitem value="arcsen(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(17)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="arccos(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(18)}" update="formula,myScript" onclick="indice();"/>
                            <p:menuitem value="arctan(x)" action="#{gestionDisenioEjercicioController.formulaConstruct(19)}" update="formula,myScript" onclick="indice();"/>                                  
                        </p:submenu>

                        <p:menuitem value="Absoluto" icon="ui-icon-absoluto" action="#{gestionDisenioEjercicioController.formulaConstruct(1)}" update="formula,myScript" onclick="indice();
                                    "/>
                        <p:menuitem value="Factorial" icon="ui-icon-factorial" action="#{gestionDisenioEjercicioController.formulaConstruct(2)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Raiz" icon="ui-icon-raiz" action="#{gestionDisenioEjercicioController.formulaConstruct(3)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Raiz n" icon="ui-icon-raizx" action="#{gestionDisenioEjercicioController.formulaConstruct(4)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Funcion exp" icon="ui-icon-ex" action="#{gestionDisenioEjercicioController.formulaConstruct(5)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Potencia" icon="ui-icon-xb" action="#{gestionDisenioEjercicioController.formulaConstruct(6)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="log natural" icon="ui-icon-ex" action="#{gestionDisenioEjercicioController.formulaConstruct(7)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="log base 10" icon="ui-icon-log" action="#{gestionDisenioEjercicioController.formulaConstruct(8)}" update="formula,myScript" onclick="indice();"/>



                    </p:submenu>

                    <p:submenu label="Agrupaciones" icon="ui-icon-pencil">
                        <p:menuitem value="Parentesis" icon="ui-icon-parentesis" action="#{gestionDisenioEjercicioController.formulaConstruct(20)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Corchete" icon="ui-icon-corchete" action="#{gestionDisenioEjercicioController.formulaConstruct(21)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Corchete doble" icon="ui-icon-corchete2" action="#{gestionDisenioEjercicioController.formulaConstruct(22)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Llaves" icon="ui-icon-llave" action="#{gestionDisenioEjercicioController.formulaConstruct(23)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Angular" icon="ui-icon-mayorIgual" action="#{gestionDisenioEjercicioController.formulaConstruct(24)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Linea" icon="ui-icon-lsencilla" action="#{gestionDisenioEjercicioController.formulaConstruct(25)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Linea doble" icon="ui-icon-ldoble" action="#{gestionDisenioEjercicioController.formulaConstruct(26)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Binomio" icon="ui-icon-binomio" action="#{gestionDisenioEjercicioController.formulaConstruct(27)}" update="formula,myScript" onclick="indice();"/>
                        <p:menuitem value="Matriz 2x3" icon="ui-icon-matriz" action="#{gestionDisenioEjercicioController.formulaConstruct(28)}" update="formula,myScript" onclick="indice();"/>
                    </p:submenu>                      

                    <p:menuitem value="Salto" action="#{gestionDisenioEjercicioController.salto()}" update="formula,myScript" onclick="indice();
                                "/>


                </p:menubar>

                <div class="EmptyBox20"></div>
                <p:inputText id="indice" class=" Responsive" value="#{gestionDisenioEjercicioController.indice}" type="hidden"/>

                <p:outputLabel for="formula" value="Formula: " class=" Responsive" ></p:outputLabel>

                <p:inputTextarea  id="formula" class="Container100"  value="#{gestionDisenioEjercicioController.formula}" ></p:inputTextarea>

                <p:graphicImage id="consulta" value="#{gestionDisenioEjercicioController.graphicText}" styleClass="Fleft"  cache="false"></p:graphicImage>

                <div class="EmptyBox20"></div>
                <div class="Container100 Responsive">
                    <p:commandButton value="Generar" action="#{gestionDisenioEjercicioController.refresh()}"  update="consulta"></p:commandButton>


                    <p:commandButton value="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthick-1-s">
                        <p:fileDownload value="#{gestionDisenioEjercicioController.file}" />
                    </p:commandButton>


                    <p:commandButton value="Refrescar" action="#{gestionDisenioEjercicioController.refresh()}" ></p:commandButton>

                </div>

                <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">
                    <h:graphicImage name="ajax-loader.gif" styleClass="Fleft" library="images" />
                </p:dialog>

                <h:panelGroup id="myScript">
                    <script type="text/javascript">

                        var valor = document.getElementById("formEj:indice");

                        var input = document.getElementById("formEj:formula");
                        if (input.setSelectionRange) {
                            input.focus();
                            input.setSelectionRange(valor.value, valor.value);
                        }
                        else if (input.createTextRange) {
                            var range = input.createTextRange();
                            range.collapse(true);
                            range.moveEnd('character', valor.value);
                            range.moveStart('character', valor.value);
                            range.select();
                        }



                    </script>
                </h:panelGroup>

            </h:form>
            <div class="EmptyBox5"></div>
        </p:panel>
    </ui:define>
</ui:composition>